import {inject, Injectable} from '@angular/core';
import {HttpClient} from '@angular/common/http';
import {Observable, of} from 'rxjs';
import {environment} from '../../environments/environment';
import {Ticket} from '../interfaces/ticket.interface';
import {PrepareNewRequest} from '../interfaces/prepare-new-request';
import {FormInput, FormSelect, FormTextarea, PrepareNewFormResponse} from '../interfaces/preparenew.response.interface';

@Injectable({
  providedIn: 'root'
})
export class TicketService {
  private readonly API_URL = environment.apiUrl;
  constructor(private http: HttpClient) {}

  get_ticket(ticket_id: number): Observable<Ticket> {
    return this.http.get<Ticket>(`${this.API_URL}/tickets/${ticket_id}`);
  }

  get_preparenew(requestData: PrepareNewRequest): Observable<PrepareNewFormResponse> {
    return this.http.post<PrepareNewFormResponse>(`${this.API_URL}/tickets/preparenew`, {
      contractor_id:requestData.contractor_id,
      ticket_id:requestData.ticket_id,
      client_id:requestData.client_id,
      ticket_type:requestData.ticket_type,
      act_type:requestData.act_type,
    });
    // Тестовые данные
    // const mockData: PrepareNewFormResponse = {
    //   header: [
    //     { "placeholder": "Дата прибытия ГГГГ-ММ-ДД", "id": "dpl", "value": "", "readonly": false, "filed_type": "input" } as FormInput,
    //     { "placeholder": "Время прибытия ЧЧ:ММ:СС", "id": "tc", "value": "", "readonly": false, "filed_type": "input" } as FormInput,
    //     { "placeholder": "Подкатегория", "id": "problemsubcategory_id", "options": [ { "value": "-1", "text": "Выберите подкатегорию", "selected": false }, { "value": "1", "text": "Ведение учетных операций", "selected": false }, { "value": "2", "text": "Настройки 1С: Предприятие", "selected": false }, { "value": "3", "text": "Обрезка базы данных 1С", "selected": false }, { "value": "4", "text": "Очистка БД 1С от неиспользуемых штрих кодов", "selected": false }, { "value": "5", "text": "Заправка картриджа", "selected": false }, { "value": "6", "text": "1С: Предприятие", "selected": false }, { "value": "7", "text": "Lotus", "selected": false }, { "value": "8", "text": "Microsoft Office", "selected": false }, { "value": "9", "text": "Microsoft Windows", "selected": false }, { "value": "10", "text": "Антивирус", "selected": false }, { "value": "11", "text": "Доступ к информационным ресурсам (сайт распоряжений, документов качества)", "selected": false }, { "value": "12", "text": "Модем (ADSL)", "selected": false }, { "value": "13", "text": "Музыкальное сопровождение зала (SPlay)", "selected": false }, { "value": "14", "text": "Обмен сообщениями (Miranda)", "selected": false }, { "value": "15", "text": "Почтовый клиент The Bat!", "selected": false }, { "value": "16", "text": "Терминал сбора данных (ПО)", "selected": false }, { "value": "17", "text": "Сетевой фильтр", "selected": false }, { "value": "18", "text": "Моноблок / системный блок", "selected": false }, { "value": "19", "text": "CD-Rom", "selected": false }, { "value": "20", "text": "USB кабель", "selected": false }, { "value": "21", "text": "Блок питания системного блока", "selected": false }, { "value": "22", "text": "Видеокарта", "selected": false }, { "value": "23", "text": "Жесткий диск", "selected": false }, { "value": "24", "text": "Кабель питания", "selected": false }, { "value": "25", "text": "Кулер", "selected": false }, { "value": "26", "text": "Материнская плата", "selected": false }, { "value": "27", "text": "ОЗУ", "selected": false }, { "value": "28", "text": "Процессор", "selected": false }, { "value": "29", "text": "Сетевая карта", "selected": false }, { "value": "30", "text": "Источник бесперебойного питания", "selected": false }, { "value": "31", "text": "Клавиатура", "selected": false }, { "value": "32", "text": "Маршрутизатор", "selected": false }, { "value": "33", "text": "Модем (ADSL или DialUp)", "selected": false }, { "value": "34", "text": "Монитор", "selected": false }, { "value": "35", "text": "Мышь", "selected": false }, { "value": "36", "text": "Драйвера принтера", "selected": false }, { "value": "37", "text": "Коммутатор (свитч)", "selected": false }, { "value": "38", "text": "Сетевой кабель", "selected": false }, { "value": "39", "text": "Сканер", "selected": false }, { "value": "40", "text": "Перемещение оборудования OLD", "selected": false }, { "value": "41", "text": "Регенерация картриджа", "selected": false }, { "value": "42", "text": "Заявки", "selected": false }, { "value": "43", "text": "Оборудование", "selected": false }, { "value": "44", "text": "POS-система", "selected": false }, { "value": "45", "text": "Весы со встроенным сканером", "selected": false }, { "value": "46", "text": "Денежный ящик", "selected": false }, { "value": "47", "text": "Клавиатура POS-системы", "selected": false }, { "value": "48", "text": "Монитор POS-системы", "selected": false }, { "value": "49", "text": "Фискальный регистратор", "selected": false }, { "value": "50", "text": "Проблемы после обновления", "selected": false }, { "value": "51", "text": "LibreOffice", "selected": false }, { "value": "52", "text": "Модем (3G)", "selected": false }, { "value": "53", "text": "Техническое задание", "selected": false }, { "value": "54", "text": "Нет связи с эквайером", "selected": false }, { "value": "55", "text": "Проведение технического обслуживания", "selected": false }, { "value": "56", "text": "Проблема", "selected": false }, { "value": "57", "text": "Проведение технического обслуживания принтеров", "selected": false }, { "value": "58", "text": "Программное обеспечение", "selected": false }, { "value": "59", "text": "Заявка на подключение к Active Directory", "selected": false }, { "value": "60", "text": "Магазины", "selected": false }, { "value": "61", "text": "Корпоративная WAN сеть ЦО-Магазин", "selected": false }, { "value": "73", "text": "Перемещение оборудования", "selected": false }, { "value": "74", "text": "Техническое задание ПК", "selected": false }, { "value": "75", "text": "Техническое задание РМК", "selected": false }, { "value": "76", "text": "Заявки на работы подрядчика ПК", "selected": false }, { "value": "77", "text": "Заявки на работы подрядчика РМК", "selected": false }, { "value": "78", "text": "Техническое обслуживание ПК", "selected": false }, { "value": "90", "text": "Консультация Магазин", "selected": false }, { "value": "91", "text": "Роутер (3G)", "selected": false }, { "value": "92", "text": "Эту не выбирать Модем (ADLS или DialUp)", "selected": false }, { "value": "93", "text": "Сетевой кабель (локальная сеть)", "selected": false }, { "value": "94", "text": "Сканер для документов", "selected": false }, { "value": "111", "text": "Acrobat Reader", "selected": false }, { "value": "112", "text": "Сайт распоряжений", "selected": false }, { "value": "113", "text": "Сайт документов качества", "selected": false }, { "value": "114", "text": "Сайт заказа разменной монеты", "selected": false }, { "value": "115", "text": "Подключение ПК к Active Directory", "selected": false }, { "value": "116", "text": "ActiveSync или Mobility Center", "selected": false }, { "value": "117", "text": "Браузер Internet Explorer", "selected": false }, { "value": "118", "text": "Почтовый клиент", "selected": false }, { "value": "120", "text": "Картридж", "selected": false }, { "value": "121", "text": "Системный блок POS-системы", "selected": false }, { "value": "122", "text": "Сканер POS-системы", "selected": false }, { "value": "123", "text": "Встроенные весы POS-системы", "selected": false }, { "value": "124", "text": "Денежный ящик POS-системы", "selected": false }, { "value": "125", "text": "POS Программное обеспечение", "selected": false }, { "value": "126", "text": "Горизонтальное", "selected": false }, { "value": "127", "text": "Вертикальное", "selected": false }, { "value": "128", "text": "Горизонтальное и вертикальное", "selected": false }, { "value": "129", "text": "Пластиковые вставки", "selected": false }, { "value": "130", "text": "Купюроприемник", "selected": false }, { "value": "131", "text": "Замок", "selected": false }, { "value": "146", "text": "Программное обеспечение POS-системы", "selected": false }, { "value": "173", "text": "Сайт формирования заданий", "selected": false }, { "value": "174", "text": "Сбой настроек 1С", "selected": false }, { "value": "178", "text": "Переоценка", "selected": false }, { "value": "179", "text": "Отправка пакетов с накладными по приходу товара от РЦ", "selected": false }, { "value": "180", "text": "Отправка накладных по актам", "selected": false }, { "value": "181", "text": "Отправка реестров", "selected": false }, { "value": "182", "text": "Отсутствие приходных цен на тару", "selected": false }, { "value": "183", "text": "Несоответствие розничной цены в базе 1С и цены центрального офиса либо сторонних", "selected": false }, { "value": "184", "text": "Несоответствие приходной цены в базе 1С и цены центрального офиса либо сторонних", "selected": false }, { "value": "185", "text": "Весы электротоварные до 15 кг. BE15TE2", "selected": false }, { "value": "186", "text": "Весы электротоварные до 15 кг. BП-15Т2", "selected": false }, { "value": "187", "text": "Весы электротоварные до 15 кг. BП-15Ф2", "selected": false }, { "value": "188", "text": "Весы электротоварные до 15 кг. Dibal D900", "selected": false }, { "value": "189", "text": "Весы электротоварные до 15 кг. ВТНЕ-15LI", "selected": false }, { "value": "190", "text": "Весы электротоварные до 15 кг. штрих МБФ", "selected": false }, { "value": "191", "text": "Весы электротоварные до 15 кг. Штрих-принт-15-2,5", "selected": false }, { "value": "192", "text": "Весы электротоварные до 1500 кг. (AXIS-4BDU-1500H-1212)", "selected": false }, { "value": "193", "text": "Весы электротоварные до 300 кг. BECN 300A€", "selected": false }, { "value": "194", "text": "Весы электротоварные до 300 кг. BTM-300", "selected": false }, { "value": "195", "text": "Весы электротоварные до 300 кг. Штрих МП", "selected": false }, { "value": "197", "text": "Неработоспособность горячего стола", "selected": false }, { "value": "198", "text": "Детектор валют(замена ламп в случае наличия ламп на магазине)", "selected": false }, { "value": "199", "text": "Ремонт купюросчетных машинок", "selected": false }, { "value": "200", "text": "Установка подменного ADSL модема", "selected": false }, { "value": "201", "text": "Монтаж нової СКС", "selected": false }, { "value": "202", "text": "Перенос/розширення СКС", "selected": false }, { "value": "203", "text": "Модернізація СКС до рівня вимог Стандарту", "selected": false }, { "value": "204", "text": "Ремонт СКС", "selected": false }, { "value": "205", "text": "Встановлення основної камери в клієнтські зоні", "selected": false }, { "value": "206", "text": "Встановлення додаткової камери в клієнтські зоні", "selected": false }, { "value": "207", "text": "Встановлення камери в зоні прийому/видачі посилок", "selected": false }, { "value": "208", "text": "Встановлення камери над столом огляду посилок", "selected": false }, { "value": "209", "text": "Встановлення камери над входом відділення", "selected": false }, { "value": "210", "text": "Перенос камери в інше місце", "selected": false }, { "value": "211", "text": "Відновлення роботи або зміна ракурсу камери відеоспостереження", "selected": false }, { "value": "212", "text": "Монтаж СКС", "selected": false }, { "value": "213", "text": "Печать из интернет-магазина", "selected": false }, { "value": "214", "text": "Ремонт РРО в СЦ", "selected": false }, { "value": "215", "text": "Ремонт оборудования РМК в СЦ", "selected": false }, { "value": "216", "text": "Ремонт компьютерной техники в СЦ", "selected": false }, { "value": "217", "text": "Ремонт ТСД в СЦ", "selected": false }, { "value": "218", "text": "Ремонт Термопринтер в СЦ", "selected": false }, { "value": "219", "text": "Ремонт Принтера в СЦ", "selected": false }, { "value": "220", "text": "Консультация подрядчика", "selected": false }, { "value": "221", "text": "Ремонт Мультимедиа", "selected": false }, { "value": "222", "text": "Консультация клиента (ПО)", "selected": false }, { "value": "223", "text": "Инцидент/Сервисное обслуживание ПО", "selected": false }, { "value": "224", "text": "Доработка ПО", "selected": false }, { "value": "225", "text": "Заказ ЗИП. \"Новая почта\" - самовывоз из отделения.", "selected": false }, { "value": "226", "text": "Заказ ЗИП. \"Новая почта\" - доставка курьером на объект.", "selected": false }, { "value": "227", "text": "ТО РМК", "selected": false }, { "value": "228", "text": "ТО принтеров", "selected": false }, { "value": "229", "text": "ТО термопринтеров", "selected": false }, { "value": "230", "text": "ТО ТСД", "selected": false }, { "value": "231", "text": "Проведения технического обслуживания холодильного оборудования", "selected": false }, { "value": "234", "text": "Проведения технического обслуживания грузоподъемного оборудования", "selected": false }, { "value": "235", "text": "Проведения технического обслуживания электротехнического оборудования", "selected": false }, { "value": "236", "text": "Проведения технического обслуживания систем водоснабжения, водоотведения", "selected": false }, { "value": "237", "text": "Проведения технического обслуживания системы отопления", "selected": false }, { "value": "238", "text": "Проведения технического обслуживания по механическому оборудованию", "selected": false }, { "value": "239", "text": "Проведения технического обслуживания кондиционеров", "selected": false }, { "value": "240", "text": "Проведения технического обслуживания кассовых боксов", "selected": false }, { "value": "241", "text": "Проведения технического обслуживания системы вентиляции", "selected": false }, { "value": "242", "text": "ТО ПК", "selected": false }, { "value": "243", "text": "ТО оборудования отдела Свежая выпечка", "selected": false }, { "value": "244", "text": "Возврат неремонтопригодного оборудования", "selected": false }, { "value": "245", "text": "Корпус КСО", "selected": false }, { "value": "246", "text": "Контрольные весы КСО", "selected": false }, { "value": "247", "text": "ТО КСО", "selected": false }, { "value": "248", "text": "Монитор КСО", "selected": false }, { "value": "249", "text": "Системный блок КСО", "selected": false }, { "value": "250", "text": "Сканер/весы КСО", "selected": false }, { "value": "251", "text": "Программное обеспечение КСО", "selected": false }, { "value": "252", "text": "Acrobat Reader (документы в формате PDF)", "selected": false }, { "value": "254", "text": "ActiveSync или Mobility Center", "selected": false }, { "value": "255", "text": "Microsoft Office (офисный пакет - Word, Excel и пр.)", "selected": false }, { "value": "256", "text": "Microsoft Windows (ошибки работы ОС)", "selected": false }, { "value": "257", "text": "Windows Photo (просмотр фото JPG, PNG, BMP, GIF)", "selected": false }, { "value": "258", "text": "Браузер Edge", "selected": false }, { "value": "259", "text": "Модем", "selected": false }, { "value": "260", "text": "Почтовый клиент Outlook", "selected": false }, { "value": "261", "text": "Сайт распоряжений", "selected": false }, { "value": "262", "text": "Ремонт детектора валют", "selected": false }, { "value": "263", "text": "Работы подрядчика РМК", "selected": false }, { "value": "264", "text": "Работы подрядчика КСО", "selected": false } ], "multiple": false, "disabled": false, "required": false, "filed_type": "select" } as FormSelect,
    //     { "placeholder": "ФИО", "id": "performer_name", "value": "Зиков Олександр", "readonly": true, "filed_type": "input" } as FormInput,
    //     { "placeholder": "Список реальных исполнителей", "id": "performer_ids", "options": [ { "value": "-1", "text": "Выберите исполнителей", "selected": false }, { "value": "558", "text": "Кузьмич Сергей", "selected": false }, { "value": "855", "text": "Мироненко Дмитрий", "selected": false }, { "value": "339", "text": "Сахно Сергей", "selected": false }, { "value": "16", "text": "Скрипец", "selected": false }, { "value": "927", "text": "Стажер ТП ІТ", "selected": false } ], "multiple": true, "disabled": false, "required": false, "filed_type": "select" } as FormSelect,
    //     { "placeholder": "ФИО", "id": "respondent_name", "value": "", "readonly": false, "filed_type": "input" } as FormInput,
    //     { "placeholder": "Причина", "id": "reason", "value": null, "readonly": true, "filed_type": "textarea" } as FormTextarea,
    //     { "placeholder": "Сделано", "id": "worked", "value": null, "readonly": false, "filed_type": "textarea" } as FormTextarea
    //   ],
    //   footer: []
    // };
    //
    // return of(mockData);
  }
}
